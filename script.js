// Playlist data
const playlists = [
    {
    title: "ðŸŽ¬ðŸ’—ðŸŽ¨ Cinema for the Soul | Best Films & Short Films | Thinking Provoking, Life Changing, Meaningful & Revolution | Must Watch for Everyone",
    description: "",
    url: "https://www.youtube.com/playlist?list=PLM6hCXv-ZtdEDsolXH0KRhc0GZpjMmt-b",
    channel: "@WeAreMature",
    categories: ["â­ VVIMP", "ðŸŽ¬ Film"],
    impact: "âœ… Positivity",
    usefulness: "âœ… Very High"
  },
  {
    title: "ðŸ‡®ðŸ‡³Â®â­Â®ðŸŽ¬ Movies (Expose And Reality of Society)",
    description: "",
    url: "https://www.youtube.com/playlist?list=PLLPLg12cL18OlB0vNkxN9r7EyKkG-4Pgw",
    channel: "@DarkSideOf-India",
    categories: ["â­ VVIMP", "ðŸŽ¬ Film"],
    impact: "âœ… Positivity",
    usefulness: "âœ… Very High"
  },
  {
    title: "ðŸ”žÂ®ðŸŽ¬ðŸ’€ðŸ¥µ Cinema's Dark Side | When Indian Films Show & Support - Crime & R@pe | R@pe & Violence in Indian Films |",
    description: "",
    url: "https://www.youtube.com/playlist?list=PLLPLg12cL18MVNiAyemuWB5m-98wutnOz",
    channel: "@DarkSideOf-India",
    categories: ["â­ VVIMP", "ðŸŽ¬ Film"],
    impact: "âŒ Negativity",
    usefulness: "âœ… Very High"
  },
  {
    title: "Great Indian Reformers, Leaders & Peoples | Hindi | Best Videos To Learn Their Social Work, Legacy & Contributions",
    description: "",
    url: "https://www.youtube.com/playlist?list=PLKEG0DlLAghllP95ZIujl9eNuJndbweX8",
    channel: "@HumanityWood",
    categories: ["â­ VVIMP", "ðŸ“º Video", "Biography"],
    impact: "âœ… Positivity",
    usefulness: "âœ… Very High"
  },
  {
    title: "ðŸ™ Please Save My India ðŸ‡®ðŸ‡³ðŸ¥¹âœ… | Change My India | India Need This | #saveindia #changeindia",
    description: "",
    url: "https://www.youtube.com/playlist?list=PLM6hCXv-ZtdGKgkSbYXNBqRPQQt_CXzyr",
    channel: "@WeAreMature",
    categories: ["â­ VVIMP", "ðŸ“º Video"],
    impact: "âœ… Positivity",
    usefulness: "âœ… Very High"
  },
  {
    title: "1ï¸âƒ£ -ðŸ•‰ï¸ðŸ”¥Kattar Bhakti Songs | Kattar Devotional Songs | Propaganda / Agenda-based Bhakti | kattar hindu bhakti songs | Hardcore Devotional",
    description: "",
    url: "https://www.youtube.com/playlist?list=PLwPax9asFg3bJKAQStQk-Gn3tq8IPl_zt",
    channel: "@YouTubePlaylistHindi",
    categories: ["ðŸŽµ Music", "ðŸ•‰ï¸ Hinduism", "â­ VVIMP"],
    impact: "âŒ Negativity",
    usefulness: "âœ… Very High"
  },
  {
    title: "ðŸ‡®ðŸ‡³Â®â­Â®ðŸ˜ðŸ’– India | Beautiful India ðŸ˜ | I Love My India â¤ï¸ | beautiful india country | Best & beautiful India Video | Beauty of India",
    description: "",
    url: "https://www.youtube.com/playlist?list=PLLPLg12cL18PBS7pmJJoVFjqjBCR6MSiz",
    channel: "@DarkSideOf-India",
    categories: ["ðŸ“º Video", "â­ VVIMP"],
    impact: "âœ… Positivity",
    usefulness: "âš¡High"
  },
  {
    title: "â­Â®â­ VVIMP VIDEOS | VERY VERY IMPORTANT VIDEOS",
    description: "",
    url: "https://www.youtube.com/playlist?list=PLLPLg12cL18MtYO3TLt-hS1VzwclxDgFo",
    channel: "@DarkSideOf-India",
    categories: ["â­ VVIMP", "ðŸ“º Video"],
    impact: "âœ… Positivity",
    usefulness: "âœ… Very High"
  },
  {
    title: "ðŸ‡®ðŸ‡³Â®â­Â®ðŸ˜ðŸ¾ World of Animals: Beauty, Emotion & Kindness in the Wild | Animal Beauty, Emotion & Family Bonds | Animals Like Us",
    description: "",
    url: "https://www.youtube.com/playlist?list=PLLPLg12cL18OelB5bk13m1VNgkgmEqiJx",
    channel: "@DarkSideOf-India",
    categories: ["ðŸ“º Video", "â­ VVIMP"],
    impact: "âœ… Positivity",
    usefulness: "âš¡High"
  },
  {
    title: "ðŸ‡®ðŸ‡³Â®ðŸ˜¢ðŸ¾World Of Animals -The Unseen Suffering: Pain, Cruelty & A Call for Help | The Dark Side for Animals | Animal Suffering",
    description: "",
    url: "https://www.youtube.com/playlist?list=PLLPLg12cL18MSscw6Vl_2ZJAm-M_-sEAA",
    channel: "@DarkSideOf-India",
    categories: ["ðŸ“º Video", "â­ VVIMP"],
    impact: "âŒ Negativity",
    usefulness: "âœ… Very High"
  },
  {
    title: "âŒÂ®ðŸ˜³ðŸ¤¢ðŸ’© The Negative Influence | Problematic Content: A Collection of Socially Damaging Messages in Media | Negative massage | #NegativeInfluence",
    description: "",
    url: "https://www.youtube.com/playlist?list=PLLPLg12cL18Nw2k2HUJYUB9_wHN9JnuDQ",
    channel: "@DarkSideOf-India",
    categories: ["ðŸ“º Video", "â­ VVIMP"],
    impact: "âŒ Negativity",
    usefulness: "âœ… Very High"
  },
  {
    title: "ðŸ‡®ðŸ‡³âš« Dark India | Mass Level ðŸ‘¥ | India's Biggest Riots and Tragedies | Indian History's Darkest Days | Mass Level Social Crimes | Collective Tragedies",
    description: "",
    url: "https://www.youtube.com/playlist?list=PLLPLg12cL18M-JFgBXRcaMTHQGzqIpr17",
    channel: "@DarkSideOf-India",
    categories: ["ðŸ“º Video", "â­ VVIMP"],
    impact: "âŒ Negativity",
    usefulness: "âœ… Very High"
  },
  {
    title: "ðŸ‡®ðŸ‡³âš« Dark India | Individual Level ðŸ‘¤ | Crimes That Shocked the Nation | Tragic Indian Cases | Individual Personal Level Crimes | Individual Tragedies",
    description: "",
    url: "https://www.youtube.com/playlist?list=PLLPLg12cL18PvtkBXfpJqJaiII11wXaH5",
    channel: "@DarkSideOf-India",
    categories: ["ðŸ“º Video", "â­ VVIMP"],
    impact: "âŒ Negativity",
    usefulness: "âœ… Very High"
  },
  {
    title: "Raajneetik Neta (Political Leaders) Of INDIA",
    description: "",
    url: "https://www.youtube.com/playlist?list=PLLPLg12cL18N3xjk8ec3ovdSKRgInh-v_",
    channel: "@DarkSideOf-India",
    categories: ["ðŸ“º Video", "â­ VVIMP"],
    impact: "âœ… Positivity",
    usefulness: "âœ… Very High"
  },
  {
    title: "ðŸ”žÂ®ðŸ‡®ðŸ‡³ðŸ”¥ðŸ’¦ Best India Hot Sexy Bold Adult Music Videos | Very Hot Music Videos | Best Item Songs | Sensual, Erotic, Seductive | Top hot music video ever",
    description: "",
    url: "https://www.youtube.com/playlist?list=PLLPLg12cL18NdKY9pjvGlh2EhamxXXQri",
    channel: "@DarkSideOf-India",
    categories: ["â­ VVIMP", "ðŸŽµ Music"],
    impact: "âŒ Negativity",
    usefulness: "âœ… Very High"
  },
  {
    title: "ðŸ‡®ðŸ‡³Â®â­Â®âœŠðŸ´â€â˜ ï¸ Protest Music India ðŸ‡®ðŸ‡³ðŸŽµðŸŽ§ | Expose Govt, Society By Music | Protest/Change By Songs | Dark Side Of India",
    description: "",
    url: "https://www.youtube.com/playlist?list=PLLPLg12cL18NvWMBJLqxewyGzM7pH2jVI",
    channel: "@DarkSideOf-India",
    categories: ["â­ VVIMP", "ðŸŽµ Music"],
    impact: "âœ… Positivity",
    usefulness: "âœ… Very High"
  },
  {
    title: "ðŸ‡®ðŸ‡³Â®ðŸ•µï¸â€â™‚ï¸â˜ ï¸ðŸ‡®ðŸ‡³ The Unseen India | India's Dark Reality: Beyond the Headlines | India's Hidden Realities",
    description: "",
    url: "https://www.youtube.com/playlist?list=PLLPLg12cL18N-sNusYQKEqVaS-1myxL4n",
    channel: "@DarkSideOf-India",
    categories: ["â­ VVIMP", "ðŸ“º Video"],
    impact: "âœ… Positivity",
    usefulness: "âœ… Very High"
  },
  {
    title: "Godman Special | Baba Bazar | Andhvishwas vs Sach | Fake Gurus, Superstition, Blind Faith, Fake Saints, Funny Claims & Hidden Truths | Must Watch All",
    description: "",
    url: "https://www.youtube.com/playlist?list=PLwPax9asFg3Yrv-pCbM4W2Lhejd3Tx8PY",
    channel: "@YouTubePlaylistHindi",
    categories: ["â­ VVIMP", "ðŸ§‘â€ðŸ« Guru"],
    impact: "âœ… Positivity",
    usefulness: "âœ… Very High"
  },
  {
    title: "âŒÂ®ðŸ’© ðŸ¤¢Useless/Meaningless/Timepass Videos | Negative Massage | This is not funny & entertainment | Save humanity | Dark side of media",
    description: "",
    url: "https://www.youtube.com/playlist?list=PLLPLg12cL18NxA59YCViCREO-9l-uVF-f",
    channel: "@DarkSideOf-India",
    categories: ["ðŸ“º Video", "â­ VVIMP"],
    impact: "âŒ Negativity",
    usefulness: "âœ… Very High"
  },
  {
    title: "ðŸ‡®ðŸ‡³ Best Videos in the World | At least everyone should see this much | Videos That Everyone Should Watch | Society, Humanity & Real Life Lessons",
    description: "",
    url: "https://www.youtube.com/playlist?list=PLM6hCXv-ZtdG3Hq1Q3geCGjkX-bDDjXn9",
    channel: "@WeAreMature",
    categories: ["â­ VVIMP", "ðŸ“º Video"],
    impact: "âœ… Positivity",
    usefulness: "âœ… Very High"
  },
  {
    title: "âœ…Â®ðŸ˜‘ðŸ‘ï¸ Save Humanity, Society | A lot of changes are needed in the world | Everyone's thinking should change | Dark Side Of Human | Dark Side Of Media",
    description: "",
    url: "https://www.youtube.com/playlist?list=PLLPLg12cL18Nn6QDYicOqt7aZYJMliPSH",
    channel: "@DarkSideOf-India",
    categories: ["ðŸ“º Video", "â­ VVIMP"],
    impact: "âœ… Positivity",
    usefulness: "âœ… Very High"
  },
  {
    title: "âŒÂ®ðŸŸðŸ™…ðŸ’© Digital Junk Food | Clickbait, Adult & Low-value Content | Cheap Entertainment | Timepass, Time waste | Mindless Content, Junk Content",
    description: "",
    url: "https://www.youtube.com/playlist?list=PLLPLg12cL18PSx_7GUXGINJC8o4IxgoZO",
    channel: "@DarkSideOf-India",
    categories: ["ðŸ“º Video", "â­ VVIMP"],
    impact: "âŒ Negativity",
    usefulness: "âœ… Very High"
  },
  {
    title: "âŒÂ®ðŸ’©ðŸ’€ðŸ“ˆ Most Useless Videos In The World But Viral So Much | Cringe, Trash, Clickbait, Mindless & Bakwas Content | AI Video",
    description: "",
    url: "https://www.youtube.com/playlist?list=PLLPLg12cL18N0Ztcn4aBFdS9tZ7NrcpVi",
    channel: "@DarkSideOf-India",
    categories: ["ðŸ“º Video", "â­ VVIMP"],
    impact: "âŒ Negativity",
    usefulness: "âœ… Very High"
  },
  {
    title: "Best Philosophy & Deep Meaning Songs | Emotional & Thoughtful Hindi Songs | Real Life Songs Playlist | Hindi",
    description: "",
    url: "https://www.youtube.com/playlist?list=PLM6hCXv-ZtdExAU3Dud9bmbZsfCHHyLZf",
    channel: "@WeAreMature",
    categories: ["ðŸŽµ Music", "â­ VVIMP"],
    impact: "âœ… Positivity",
    usefulness: "âœ… Very High"
  },
  {
    title: "Best Humanity Songs | Soulful Music for Humanity, Peace, Kindness, and Emotions | Positive Hindi Songs for All | Heart-Touching Playlist | Hindi",
    description: "",
    url: "https://www.youtube.com/playlist?list=PLM6hCXv-ZtdEfMBMWwY2JZ2M2cBPqMkcf",
    channel: "@WeAreMature",
    categories: ["ðŸŽµ Music", "â­ VVIMP"],
    impact: "âœ… Positivity",
    usefulness: "âœ… Very High"
  },
  {
    title: "Great World Thinkers & Spiritual Teachers | Hindi | Best Videos To Understand Their Wisdom",
    description: "",
    url: "https://www.youtube.com/playlist?list=PLKEG0DlLAghkcWt_lKnqLVpBRcAM_xKph",
    channel: "@HumanityWood",
    categories: ["â­ VVIMP", "Biography", "ðŸ“º Video"],
    impact: "âœ… Positivity",
    usefulness: "âœ… Very High"
  },
  {
    title: "â–¶ï¸5ï¸âƒ£ Best Videos For Everyone | Motivation, Inspiration, Transformation & Life Hacks | Habits, Mindset, Discipline, Productivity & Focus",
    description: "",
    url: "https://www.youtube.com/playlist?list=PLwPax9asFg3aCvH38Bz5UQZGzkCV1AIEs",
    channel: "@YouTubePlaylistHindi",
    categories: ["â­ VVIMP", "ðŸ“º Video"],
    impact: "âœ… Positivity",
    usefulness: "âœ… Very High"
  },
  {
    title: "Great Indian Thinkers & Gurus | Hindi | Best Videos To Understand Their Wisdom, Massages & Teachings",
    description: "",
    url: "https://www.youtube.com/playlist?list=PLKEG0DlLAghmjies7K7wj-97s6WY01syw",
    channel: "@HumanityWood",
    categories: ["â­ VVIMP", "Biography", "ðŸ“º Video"],
    impact: "âœ… Positivity",
    usefulness: "âœ… Very High"
  },
  {
    title: "â–¶ï¸4ï¸âƒ£ Best Videos For Everyone | Wisdom, Philosophy & Purpose | Life, Time & Job/Work | Life Lessons, Inner Growth & Truth | Must Watch for Everyone",
    description: "",
    url: "https://www.youtube.com/playlist?list=PLwPax9asFg3bnDV6C6pSha40W1VSqy_bu",
    channel: "@YouTubePlaylistHindi",
    categories: ["â­ VVIMP", "ðŸ“º Video"],
    impact: "âœ… Positivity",
    usefulness: "âœ… Very High"
  },
  {
    title: "God, Religion & Spirituality as Philosophy | Hindi | Best Videos to Understand True Meaning",
    description: "",
    url: "https://www.youtube.com/playlist?list=PLKEG0DlLAghnuOokCA9XS1X8IPR1jqlqk",
    channel: "@HumanityWood",
    categories: ["â­ VVIMP", "ðŸ“º Video"],
    impact: "âœ… Positivity",
    usefulness: "âœ… Very High"
  },
  {
    title: "â–¶ï¸1ï¸âƒ£Best Videos For Everyone | Parenting Tips & Life Lessons | Best Parenting Guide for Parents & Children | Must Watch Videos for Parents & Children",
    description: "",
    url: "https://www.youtube.com/playlist?list=PLwPax9asFg3YKvO0SQVGzO5E-OCqVxwgH",
    channel: "@YouTubePlaylistHindi",
    categories: ["â­ VVIMP", "ðŸ“º Video"],
    impact: "âœ… Positivity",
    usefulness: "âœ… Very High"
  },
  {
    title: "â–¶ï¸2ï¸âƒ£ Best Videos For Everyone | Health, Fitness, Food & Nutrition Guide | Best Diet, Fitness & Healthy Lifestyle Tips | Must Watch for Everyone",
    description: "",
    url: "https://www.youtube.com/playlist?list=PLwPax9asFg3bMEMebsuU2FSSa7TnXm-tv",
    channel: "@YouTubePlaylistHindi",
    categories: ["â­ VVIMP", "ðŸ“º Video"],
    impact: "âœ… Positivity",
    usefulness: "âœ… Very High"
  },
  {
    title: "â–¶ï¸3ï¸âƒ£ Best Videos For Everyone | Reality of Media, Government, Elites & Society | Truth, Awareness & Life Lessons | Must Watch for Everyone",
    description: "",
    url: "https://www.youtube.com/playlist?list=PLwPax9asFg3ZdGXiXHKmxnEDxeohkEqvS",
    channel: "@YouTubePlaylistHindi",
    categories: ["â­ VVIMP", "ðŸ“º Video"],
    impact: "âœ… Positivity",
    usefulness: "âœ… Very High"
  }
];

// All available categories
const allCategories = [
    "All Content", "Video", "Film", "Music", "World", "Guru", "Politics", 
    "Expose", "Biography", "Family", "Book", "Philosophy", "Hinduism", 
    "Religion", "Upnishad", "Sanatan Dharma"
];

// State variables
let currentCategory = "All Content";
let impactFilters = ["Positive"];
let usefulnessFilters = ["Average", "High", "Very High"];
let expandedCards = {};
let descriptionExpanded = {};

// DOM elements
const categoryButtonsContainer = document.getElementById('category-buttons');
const playlistsContainer = document.getElementById('playlists-container');
const filteredCountElement = document.getElementById('filtered-count');
const totalCountElement = document.getElementById('total-count');
const themeToggle = document.getElementById('theme-toggle');

// Initialize the app
function init() {
    renderCategoryButtons();
    renderPlaylists();
    setupEventListeners();
    updateCounter();
    setupThemeToggle();
}

// Setup theme toggle
function setupThemeToggle() {
    const savedTheme = localStorage.getItem('theme') || 'dark';
    document.documentElement.setAttribute('data-theme', savedTheme);
    
    themeToggle.addEventListener('click', () => {
        const currentTheme = document.documentElement.getAttribute('data-theme');
        const newTheme = currentTheme === 'dark' ? 'light' : 'dark';
        document.documentElement.setAttribute('data-theme', newTheme);
        localStorage.setItem('theme', newTheme);
    });
}

// Render category buttons
function renderCategoryButtons() {
    categoryButtonsContainer.innerHTML = '';
    
    allCategories.forEach(category => {
        const button = document.createElement('button');
        button.textContent = category;
        button.dataset.category = category;
        if (category === currentCategory) {
            button.classList.add('active');
        }
        categoryButtonsContainer.appendChild(button);
    });
}

// Render playlist cards
function renderPlaylists() {
    playlistsContainer.innerHTML = '';
    
    const filteredPlaylists = filterPlaylists();
    
    filteredPlaylists.forEach((playlist, index) => {
        const card = document.createElement('div');
        card.className = `playlist-card ${expandedCards[index] ? 'expanded' : ''}`;
        card.dataset.index = index;
        
        const isExpanded = expandedCards[index];
        const isDescriptionExpanded = descriptionExpanded[index];
        
        card.innerHTML = `
            <div class="card-header">
                <div>
                    <h3 class="card-title">${playlist.title}</h3>
                    <div class="tag-chips">
                        ${playlist.categories.map(cat => `<span class="chip category-chip">${cat}</span>`).join('')}
                        <span class="chip impact-chip">${playlist.impact}</span>
                    </div>
                </div>
                <span class="expand-icon">â–¼</span>
            </div>
            <div class="card-body" style="max-height: ${isExpanded ? '2000px' : '0'}">
                <a href="${playlist.url}" target="_blank" class="watch-btn">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M8 5v14l11-7z"/>
                    </svg>
                    Watch Playlist On YouTube
                </a>
                <div class="video-container">
                    <iframe src="${getEmbedUrl(playlist.url)}" 
                            allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" 
                            allowfullscreen>
                    </iframe>
                </div>
                <div class="description-section">
                    <button class="description-toggle">
                        <svg width="14" height="14" viewBox="0 0 24 24" fill="currentColor">
                            <path d="${isDescriptionExpanded ? 'M7 10l5 5 5-5z' : 'M7 14l5-5 5 5z'}"/>
                        </svg>
                        Playlist Description
                    </button>
                    <div class="description ${isDescriptionExpanded ? 'expanded' : ''}">
                        <p>${playlist.description}</p>
                    </div>
                </div>
                <div class="details-grid">
                    <div class="detail-item">
                        <span class="detail-label">Channel</span>
                        <span>${playlist.channel}</span>
                    </div>
                    <div class="detail-item">
                        <span class="detail-label">Categories</span>
                        <span>${playlist.categories.join(', ')}</span>
                    </div>
                    <div class="detail-item">
                        <span class="detail-label">Impact</span>
                        <span>${playlist.impact}</span>
                    </div>
                    <div class="detail-item">
                        <span class="detail-label">Usefulness</span>
                        <span>${playlist.usefulness}</span>
                    </div>
                </div>
            </div>
        `;
        
        playlistsContainer.appendChild(card);
    });
}

// Filter playlists based on current filters
function filterPlaylists() {
    return playlists.filter(playlist => {
        // Category filter
        const categoryMatch = currentCategory === "All Content" || 
                             playlist.categories.includes(currentCategory);
        
        // Impact filter
        const impactMatch = impactFilters.includes(playlist.impact);
        
        // Usefulness filter
        const usefulnessMatch = usefulnessFilters.includes(playlist.usefulness);
        
        return categoryMatch && impactMatch && usefulnessMatch;
    });
}

// Get YouTube embed URL from playlist URL
function getEmbedUrl(url) {
    const playlistId = url.split('list=')[1];
    return `https://www.youtube.com/embed/videoseries?list=${playlistId}`;
}

// Update counter
function updateCounter() {
    const filteredPlaylists = filterPlaylists();
    filteredCountElement.textContent = filteredPlaylists.length;
    totalCountElement.textContent = playlists.length;
}

// Setup event listeners
function setupEventListeners() {
    // Category button clicks
    document.querySelectorAll('#category-buttons button').forEach(button => {
        button.addEventListener('click', () => {
            currentCategory = button.dataset.category;
            document.querySelectorAll('#category-buttons button').forEach(btn => {
                btn.classList.remove('active');
            });
            button.classList.add('active');
            renderPlaylists();
            updateCounter();
        });
    });
    
    // Impact checkbox changes
    document.querySelectorAll('#impact-checkboxes input').forEach(checkbox => {
        checkbox.addEventListener('change', () => {
            impactFilters = Array.from(document.querySelectorAll('#impact-checkboxes input:checked'))
                                .map(cb => cb.value);
            renderPlaylists();
            updateCounter();
        });
    });
    
    // Usefulness checkbox changes
    document.querySelectorAll('#usefulness-checkboxes input').forEach(checkbox => {
        checkbox.addEventListener('change', () => {
            usefulnessFilters = Array.from(document.querySelectorAll('#usefulness-checkboxes input:checked'))
                                    .map(cb => cb.value);
            renderPlaylists();
            updateCounter();
        });
    });
    
    // Card expansion (delegated event)
    playlistsContainer.addEventListener('click', (e) => {
        const cardHeader = e.target.closest('.card-header');
        const descriptionToggle = e.target.closest('.description-toggle');
        
        if (cardHeader) {
            const card = cardHeader.parentElement;
            const index = parseInt(card.dataset.index);
            
            // Toggle expanded state
            if (expandedCards[index]) {
                delete expandedCards[index];
                // Also collapse description when card is collapsed
                delete descriptionExpanded[index];
            } else {
                expandedCards[index] = true;
            }
            
            renderPlaylists();
        } else if (descriptionToggle) {
            const descriptionSection = descriptionToggle.parentElement;
            const card = descriptionSection.closest('.playlist-card');
            const index = parseInt(card.dataset.index);
            
            // Toggle description expanded state
            if (descriptionExpanded[index]) {
                delete descriptionExpanded[index];
            } else {
                descriptionExpanded[index] = true;
            }
            
            renderPlaylists();
        }
    });
}

// Initialize the application
document.addEventListener('DOMContentLoaded', init);
